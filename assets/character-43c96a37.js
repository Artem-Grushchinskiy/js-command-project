import{n as o,P as H,l as S,a as l}from"./tui-pagination-278a18fc.js";/* empty css               */import{d as M}from"./modal2-768ddd76.js";o.exports.Loading.init({backgroundColor:"rgba(0,0,0,0.5)",svgColor:"#34387F",clickToClose:!1});const a={charFormEl:document.querySelector(".char-search-form"),cardContainer:document.querySelector(".char-card-container"),paginationEl:document.querySelector(".tui-pagination"),mainContainer:document.querySelector(".container"),headerInput:document.querySelector(".header-input"),headerForm:document.querySelector(".header-form"),heroEl:document.querySelector(".char-hero")},x=a.charFormEl.elements.searchComics,C=a.charFormEl.elements.searchName,k=a.charFormEl.elements.select,P=a.charFormEl.elements.searchDate;let v=null,s=null,c=null,d=null,m=null,i=[],n=null,y=1,w=window.getComputedStyle(a.mainContainer).width;console.log(w);switch(w){case"365px":n=5;break;case"100%":n=5;break;case"1440px":n=16;break;default:n=8;break}console.log(n);const D={totalItems:0,itemsPerPage:n,visiblePages:2,page:1},h=new H(a.paginationEl,D),f=M(P,{dateSelected:new Date,formatter:(t,e,r)=>{const g=e.toLocaleDateString();t.value=g},onSelect:(t,e)=>{q(t,e)}});f.calendarContainer.style.setProperty("background-color","var(--background)");f.calendarContainer.style.setProperty("color","var(--text)");f.calendarContainer.style.setProperty("font-family","Poppins");f.calendarContainer.style.setProperty("font-weight","400");a.headerForm.addEventListener("submit",b);a.headerInput.addEventListener("input",S(b,300));a.charFormEl.addEventListener("submit",F);C.addEventListener("input",S(T,300));k.addEventListener("change",N);I();async function I(){try{const t=await l.getAllCharacters({limit:n,offset:0});if(o.exports.Loading.remove(),u(t.results),a.paginationEl.classList.remove("is-hidden"),t.total<n)return;h.reset(t.total),h.on("beforeMove",async e=>{const{page:r}=e;console.log(r);let g=n*(r-1);try{const p=await l.getAllCharacters({offset:g,nameStartsWith:s,orderBy:c,comics:m,modifiedSince:d});a.cardContainer.innerHTML="",o.exports.Loading.remove(),u(p.results)}catch{location.replace("../404.html"),console.log("Error!!!!!!!!!!!")}})}catch{location.replace("../404.html"),console.log("Error!!!!!!!!!!!")}}async function F(t){a.paginationEl.classList.add("is-hidden"),o.exports.Loading.standard("Loading..."),t.preventDefault(),a.headerInput.value="",C.value=null,s=null,c=null,d=null,i=[],v=x.value;try{const e=await l.getComics({title:v,limit:100,offset:0});if(e.total===0){o.exports.Loading.remove(),a.cardContainer.innerHTML='<span class="char-error"></span>',console.log("NOTHIG TO RENDER");return}y=Math.ceil(e.total/100),console.log(y);for(let r=1;r<=y;r++){const p=100*(r-1);try{const E=await l.getComics({title:v,limit:100,offset:p});i.length<10&&E.results.map(L=>{if(L.characters.available&&i.length<10)i.push(L.id);else return})}catch{o.exports.Loading.remove(),location.replace("../404.html"),console.log("Error!!!!!!")}}if(i.length>0){m=i.join(", ");try{console.log(i.length);const r=await l.getAllCharacters({nameStartsWith:s,orderBy:c,comics:m,modifiedSince:d,limit:n});r.results.length===0&&(a.cardContainer.innerHTML='<span class="char-error"></span>',console.log("NOTHIG TO RENDER")),a.cardContainer.innerHTML="",h.reset(r.total),u(r.results),a.paginationEl.classList.remove("is-hidden"),o.exports.Loading.remove()}catch{location.replace("../404.html")}}}catch{o.exports.Loading.remove(),location.replace("../404.html")}}function b(t){t.preventDefault,C.value=t.target.value,T(t),O()}async function T(t){a.paginationEl.classList.add("is-hidden"),s=t.target.value,a.headerInput.value=t.target.value;try{const e=await l.getAllCharacters({nameStartsWith:s,orderBy:c,comics:m,modifiedSince:d,limit:n});if(e.results.length===0){a.cardContainer.innerHTML='<span class="char-error"></span>',console.log("NOTHIG TO RENDER");return}h.reset(e.total),a.cardContainer.innerHTML="",u(e.results),a.paginationEl.classList.remove("is-hidden")}catch{location.replace("../404.html")}}async function N(t){t.preventDefault,c=t.target.value.toLowerCase();try{const e=await l.getAllCharacters({orderBy:c,limit:n,nameStartsWith:s,comics:m,modifiedSince:d});h.reset(e.total),a.cardContainer.innerHTML="",u(e.results),console.log(e.results)}catch{location.replace("../404.html"),console.log("Error!!!!!!!!!!!")}}async function q(t,e){d=e;try{const r=await l.getAllCharacters({orderBy:c,nameStartsWith:s,limit:n,comics:m,modifiedSince:d});if(r.results.length===0){a.cardContainer.innerHTML='<span class="char-error"></span>';return}h.reset(r.total),a.cardContainer.innerHTML="",u(r.results)}catch{location.replace("../404.html")}}function u(t){a.cardContainer.insertAdjacentHTML("beforeend",A(t))}function A(t){return t.map(e=>`
    <div class="char-card">
      <a class="char-image-wrap" data-id="${e.id}" href="#">
        <img
          class="char-card-image"
          data-id="${e.id}"
          src= "${e.thumbnail.path}/portrait_uncanny.${e.thumbnail.extension}"
          alt=""
          loading="lazy"
        />
        <div class="char-card-descr" data-id="${e.id}">
          <p class="char-card-descr-name" data-id="${e.id}">${e.name}</p>
        </div>
      </a>
    </div>`).join("")}function O(){const t=a.heroEl.getBoundingClientRect().height;window.scrollBy({top:t,behavior:"smooth"})}
